1. Configureu dos ordinadors fent servir la comanda ip amb dues adreces del rang 172.16.0.0 i comproveu que es veuen entre si. Indiqueu les comandes que heu utilitzat a)per configurar-les b) per comprovar que es veuen.

Per configurar les adreces:

# ip addr add 172.16.0.13/16 dev enp5s0
# ip addr add 172.16.0.15/16 dev enp5s0

Per comprovar que s’han configurat les Ips correctament:

# ip addr show enp5s0

Per comprovar que es veuen:

# ping 172.16.0.15

PING 172.16.0.15 (172.16.0.15) 56(84) bytes of data.
64 bytes from 172.16.0.15: icmp_seq=1 ttl=64 time=0.658 ms
64 bytes from 172.16.0.15: icmp_seq=2 ttl=64 time=0.477 ms
64 bytes from 172.16.0.15: icmp_seq=3 ttl=64 time=0.471 ms
--- 172.16.0.15 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2000ms
rtt min/avg/max/mdev = 0.471/0.535/0.658/0.088 ms

2. Com podem descobrir l'adreça mac d'un altre dispositiu de la nostra xarxa (que no sigui el nostre)? Indiqueu-ne les comandes i la sortida.

# arp -a
# arp 172.16.0.15

Address HWtype HWaddress Flags Mask Iface
172.16.0.15 ether 40:8d:5c:e4:37:c7 C enp5s0

3. Com podem canviar el nom d'una interfície de xarxa amb la comanda ip? Poseu exemple.

# ip link set enp5s0 down
# ip link set enp5s0 name practica_1
# ip link set practica_1 up
# ip a s practica_1

2: practica_1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
link/ether 40:8d:5c:e4:1d:e4 brd ff:ff:ff:ff:ff:ff
inet 192.168.2.43/16 brd 192.168.255.255 scope global dynamic practica_1
valid_lft 21563sec preferred_lft 21563sec
inet 172.16.0.13/16 scope global practica_1
valid_lft forever preferred_lft forever
inet6 fe80::f89e:3f01:145c:9844/64 scope link
valid_lft forever preferred_lft forever

4. Busqueu el paquet RPM per a la utilitat netperf i instal.leu-lo (copieu netperf al directori cp netperf /usr/local/bin per tal que sigui accessible desde qualsevol lloc). Arrenqueu el servidor en una de les màquines i el client en l'altra tot comprovant la velocitat que obtenim entre els dos. Indiqueu quina es la velocitat obtinguda. Feu servir aquest script en el client per tal de comprovar TCP full-duplex:

91.39 inbound
91.44 outbound

5. Canvieu ara la MTU de les interfícies de xarxa dels dos ordinadors a un valor de 9000 bytes. comproveu de nou quina és la velocitat obtinguda. Expliqueu els resultats tot comparant-los.

# ifconfig enp5s0 mtu 9000
# ip link set enp5s0 mtu 9000
# ip a s enp5s0

2: enp5s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc fq_codel state UP group default qlen 1000

483.20 inbound
483.07 outbound

Es pot veure clarament com la velocitat ha augmentat considerablement.

6. Realitzeu ara la mateixa configuració estàtica d'adreces IP amb la comanda nmcli. Indiqueu-ne els passos.

D'aquesta manera afegim una altra IP a la connexió existent:

# nmcli connection modify enp5s0 +ipv4.addresses 172.16.0.13/16
# nmcli connection up enp5s0 
# nmcli device show enp5s0

D'aquesta altra creem una nova connexió per a la interfície enp5s0 amb una IP:

# nmcli con add con-name net-eth0 ifname enp5s0 type ethernet ip4 172.16.0.13/16 gw4 	192.168.0.1

Connection 'net-eth0' (57d106a7-afb9-4381-acb1-d889c9a2591a) successfully added.

Activem la nova connexió:

# nmcli connection up net-eth0

Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/2)

# nmcli connection show

NAME UUID TYPE DEVICE
enp5s0 5befe0cc-c7fb-4eff-87d2-faf54eb97cef 802-3-ethernet enp5s0

7. On es troba la configuració de servidors de noms de domini?

# cat /etc/resolv.conf

#Generated by NetworkManager
search informatica.escoladeltreball.org
nameserver 192.168.0.10
nameserver 10.1.1.200
nameserver 193.152.63.197

8. Realitzeu la mateixa configuració anterior de manera permanent (ifcfg-...). Quins són els paràmetres de la comanda nmcli per tal de forçar que s'apliquin els canvis de xarxa que hem fet als fitxers?

Modifiquem el fitxer /etc/sysconfig/network-scripts/ifcfg-enp5s0

NAME="enp5s0"
DEVICE="enp5s0"
ONBOOT=yes
NETBOOT=yes
UUID="5befe0cc-c7fb-4eff-87d2-faf54eb97cef"
IPV6INIT=yes
BOOTPROTO=none
TYPE=Ethernet
IPADDR=172.16.0.13
PREFIX=16
GATEWAY=192.168.1.10
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no

Per aplicar els canvis de xarxa que hem fet als fitxers:

# nmcli connection up enp5s0

9. Com podem canviar de manera permanent el nom de les interfícies de xarxa (que sobrevisquin a un reinici?) /etc/udev/rules.d/70-persistent-net.rules

Creem i afegim la següent línia al nou fitxer:

SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?", ATTR{address}== "40:8d:5c:e4:37:c7", ATTR{type}== "1", KERNEL=="e", NAME="nova_interficie"

10. Com podem traduïr un nom de domini per la seva/seves adreces IP? I com podem trobar el nom de domini a partir d'una adreça IP?

Per traduïr un nom de domini:

# nslookup i15.informatica.escoladeltreball.org.

Server: 192.168.0.10
Address: 192.168.0.10#53

Name: i15.informatica.escoladeltreball.org
Address: 192.168.2.45

Per trobar el nom de domini a partir d'una IP:

# nslookup 192.168.2.45

Server: 192.168.0.10
Address: 192.168.0.10#53

45.2.168.192.in-addr.arpa name = i15.informatica.escoladeltreball.org.

